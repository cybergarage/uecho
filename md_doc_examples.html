<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>uEcho for C: examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">uEcho for C
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_doc_examples.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">examples </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><img src="img/logo.png" alt="logo" class="inline"/></p>
<p >The <code>uecho-c</code> includes some sample implementations for controller and device of <a href="http://echonet.jp/english/">ECHONET Lite</a> in the <code>examples</code> directory.</p>
<h1><a class="anchor" id="autotoc_md32"></a>
Examples for ECHONET Lite Controller</h1>
<h2><a class="anchor" id="autotoc_md33"></a>
uechosearch</h2>
<p >The <code>uechosearch</code> is a sample controller to search all <a href="http://echonet.jp/english/">ECHONET Lite</a> nodes in the same local area network, and the usage is below.</p>
<div class="fragment"><div class="line">Usage : uechosearch [options]</div>
<div class="line"> -v : Enable verbose output</div>
<div class="line"> -d : Enable debug output</div>
<div class="line"> -h : Print this message</div>
</div><!-- fragment --><p >The <code>uechosearch</code> searches all <a href="http://echonet.jp/english/">ECHONET Lite</a> device and profile objects in the local area network, and prints all found objects with the IP address as the following:</p>
<div class="fragment"><div class="line">$ uechosearch</div>
<div class="line">192.168.xxx.aaa [0] 0EF001 [1] 05FF01 --&gt; (Node Profile Object, Controller Object)</div>
<div class="line">192.168.xxx.bbb [0] 0EF001 [1] 029101 --&gt; (Node Profile Object, Mono Functional Lighting)</div>
</div><!-- fragment --><p >In the verbose mode, the <code>uechosearch</code> prints all required read property data of the found objects as the following:</p>
<div class="fragment"><div class="line">$ uechosearch -v</div>
<div class="line">192.168.xxx.bbb  (xxxxxxxxxx)</div>
<div class="line">[0] 0EF001 (Node profile)</div>
<div class="line">[0] [0] 80 (Operating status) 30</div>
<div class="line">[0] [1] 82 (Version information) 010A0100</div>
<div class="line">[0] [2] 83 (Identification number) FE00000B00000EF00100C08FFFFE5E20D3</div>
<div class="line">[0] [5] 8A (Manufacturer code) 00000B</div>
<div class="line">[0] [10] 9D (Status change announcement property map) 0480D5F0FA</div>
<div class="line">[0] [11] 9E (Set property map) 09F1F2F4F5F6F7F8F9FF</div>
<div class="line">[0] [12] 9F (Get property map) 19818081A1A080A0A08080018081820202</div>
<div class="line">[0] [14] D3 (Number of self-node instances) 000002</div>
<div class="line">[0] [15] D4 (Number of self-node classes) 0003</div>
<div class="line">[0] [17] D6 (Self-node instance list S) 020F2001029101</div>
<div class="line">[0] [18] D7 (Self-node class list S) 020F200291</div>
<div class="line">[1] 029101 (Mono functional lighting)</div>
<div class="line">[1] [0] 80 (Operation status) 30</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md34"></a>
uechopost</h2>
<p >The <code>uechopost</code> is a sample controller to post a message to a <a href="http://echonet.jp/english/">ECHONET Lite</a> node in the same local area network, and the usage is below.</p>
<div class="fragment"><div class="line">Usage : uechopost [options] &lt;address&gt; &lt;obj&gt; &lt;esv&gt; &lt;property (epc, pdc, edt) ...&gt;</div>
<div class="line"> -v : Enable verbose output</div>
<div class="line"> -n : Disable unicast server</div>
<div class="line"> -d : Enable debug output</div>
<div class="line"> -h : Print this message</div>
</div><!-- fragment --><p >The <code>uechopost</code> can send any request message of <a href="http://echonet.jp/english/">ECHONET Lite</a> to an object in the node, and prints the response message. The following example get the standard information from a <a href="http://echonet.jp/english/">ECHONET Lite</a> device, and control the power status.</p>
<div class="fragment"><div class="line">$ uechopost</div>
<div class="line">Usage : echopost &lt;address&gt; &lt;obj&gt; &lt;esv&gt; &lt;property (epc, pdc, edt) ...&gt;</div>
<div class="line"> </div>
<div class="line">$ uechopost 192.168.xxx.bb 029101 62 8A00 --&gt; READ REQ : Manufacturer code (=0x8A)</div>
<div class="line">192.168.xxx.bb 029101 72 8A0300000B       --&gt; READ RES : Panasonic (=0x00000B)</div>
<div class="line"> </div>
<div class="line">$ uechopost 192.168.xxx.bb 029101 62 8200 --&gt; READ REQ : Standard Version (=0x82)</div>
<div class="line">192.168.xxx.bb 029101 72 820400004600     --&gt; READ RES : Appenddix F (=0x46)</div>
<div class="line"> </div>
<div class="line">$ uechopost 192.168.xxx.bb 029101 62 8000  --&gt; READ REQ : Operation status (=0x80)</div>
<div class="line">192.168.xxx.bb 029101 72 800131            --&gt; READ RES : OFF (=0x31)</div>
<div class="line"> </div>
<div class="line">$ uechopost 192.168.xxx.bb 029101 61 800130 --&gt; WRITE REQ : Operation status ON (=0x30)</div>
<div class="line">192.168.xxx.bb 029101 71 8000               --&gt; WRITE RES : (No Data)</div>
<div class="line"> </div>
<div class="line">$uechopost 192.168.xxx.bb 029101 62 8000  --&gt; READ REQ : Operation status (=0x80)</div>
<div class="line">192.168.xxx.bb 029101 72 800131           --&gt; READ RES : ON (=0x30)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md35"></a>
uechodump</h2>
<p >The <code>uechodump</code> is a sample controller to print all multicast messages of <a href="http://echonet.jp/english/">ECHONET Lite</a> in the same local area network, and the usage is below.</p>
<div class="fragment"><div class="line">Usage : uechodump [options]</div>
<div class="line"> -n : Disable unicast server</div>
<div class="line"> -d : Enable debug output</div>
<div class="line"> -h : Print this message</div>
</div><!-- fragment --><p >The <code>uechodump</code> prints all multicast packets of announce and notification messages from other node as the following:</p>
<div class="fragment"><div class="line">$ uechodump</div>
<div class="line">172.20.10.2 10 81 00 EF001 EF001 73 1 D5</div>
<div class="line">172.20.10.2 10 81 00 EF001 EF001 73 1 D5</div>
<div class="line">172.20.10.2 10 81 01 EF001 EF001 62 1 D6</div>
<div class="line">....</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md36"></a>
Examples for ECHONET Lite Devices</h1>
<h2><a class="anchor" id="autotoc_md37"></a>
uecholight</h2>
<p >The <code>uecholight</code> is an implementation example of the standard mono functional light device object which is specified in the <a href="http://echonet.jp/english/">ECHONET Lite</a>, and the usage is below.</p>
<div class="fragment"><div class="line">Usage : uecholight</div>
<div class="line"> -v        : Enable verbose output</div>
<div class="line"> -m XXXXXX : Set Manufacturer code</div>
<div class="line"> -h        : Print this message</div>
</div><!-- fragment --><p >The example device object is specified as the 'Requirements for mono functional lighting class' in the Detailed Requirements for ECHONET Device objects<a href="http://www.echonet.gr.jp/english/spec/index.htm">[1]</a>, and the object code is below.</p>
<ul>
<li>mono functional lighting class<ul>
<li>Class group code : 0x02</li>
<li>Class code : 0x91</li>
<li>Instance code 0x01</li>
</ul>
</li>
</ul>
<p >The <code>uecholight</code> outputs power status messages when the write requests are received form other nodes or controllers as the following:</p>
<div class="fragment"><div class="line">$ uecholight</div>
<div class="line">ESV = 80 : 30 (1)</div>
<div class="line">POWER = ON</div>
<div class="line">ESV = 80 : 31 (1)</div>
<div class="line">POWER = OFF</div>
</div><!-- fragment --><p >For Raspberry Pi, <code>uecholight</code> outputs the lighting power status into the specified GPIO port.</p>
<p ><img src="img/example_raspberry_pi.jpg" alt="RaspberyPi" class="inline"/></p>
<p >To enable the GPIO function for Raspberry Pi, compile with UECHO_PLATFORM_RASPBIAN option and run <code>uecholight</code> with root privileges.</p>
<h1><a class="anchor" id="autotoc_md38"></a>
References</h1>
<ul>
<li>[1] <a href="http://www.echonet.gr.jp/english/spec/index.htm">Detailed Requirements for ECHONET Device objects</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
